var fb_login=new function(){var c;this.init=g;function g(){$(".fb-connect").click(b)}function b(h){c=$(this).parent("form");c.addClass("loading");h.preventDefault();FB.login(function(i){if(i.status==="connected"){f();FB.api("/me",function(j){if(j.email==null){loadAlert("Email Required","We need to be able to access your email address in order to create this account. ",default_args);d()}else{e()}})}},{scope:fb_permissions})}function e(){var i="";var h="/post/fb/index.php";form_function.processValues(i,h,a)}function a(j){var i=j.find("type").text();var h={confirm:false,verify:false};c.removeClass("loading");if(i=="error"){loadAlert("Email already exists",'An account already exists with the email address associated to your Facebook account. If you forgot your password, click the "forgot password" link from the <a href="/login">login page</a>. Otherwise, please try to create an account with a different email address.',h)}else{c.addClass("success");$(document).trigger("close-signup");window.open("/dashboard","_self")}}function f(){$("#LoginButton").hide();$("#results").html('<img src="img/ajax-loader.gif" /> Please Wait Connecting...')}function d(){$("#LoginButton").show();$("#results").html("")}};$(function(){fb_login.init()});var form_function=new function(){var j;var L;var h;var O=new Array();var G;this.init=M;this.processForm=p;this.handleXmlReturn=e;this.processValues=E;this.setSelectbox=x;function M(){$("#data-form").submit(K);$("input,textarea").keydown(a).change(a);$(document).on("keydown",".error",z).on("change",".error",z);$(".selected-list a").click(R);$(document).on("click",".all-list .item",I);$(document).on("click",".all-list .item .del",S)}function I(U){$(this).toggleClass("selected")}function R(U){$(this).parent().next().show();$(document).on("click",".all-list",d).click(D);$(".all-list input").focus().keydown(l);return false}function l(W){if(W.keyCode==13){var X=$(this).val();var V="cat="+X+"&wid="+website_id;var U="/dashboard/post/category/";$(this).val("");$(".all-list").prepend('<div class="item selected">'+X+'<div class="del" data-title="'+X+'"></div></div>');E(V,U);W.preventDefault();return false}}function S(W){var X=$(this).attr("data-title");var V="cat="+X+"&wid="+website_id;var U="/dashboard/post/category/delete/";$(this).parent().remove();E(V,U)}function D(){var U=Array();$(".all-list .item.selected").each(function(V){U.push($(this).text())});$(".selected-list .list").text(U.join(","));$(".selected-list input[type=hidden]").val(U.join("|"));$(document).off("click",".all-list",d).off("click",D);$(".all-list").hide()}function d(U){U.stopImmediatePropagation()}function u(V){var Z=this.files[0];var W=Z.name;var af=Z.size;var ac=Z.type;var ae=String(W).split(".");var X=String(ae[ae.length-1]).toLowerCase();var aa=$(this).attr("format");var ad=String(aa).split(",");var ab={confirm:false,verify:false};if($.inArray(X,ad)==-1){loadAlert("File Not Allowed",'The file you selected is not allowed. Allowed formats are: <span class="question">'+aa+"</span>",ab);return}else{var Y=$(this).attr("data-name");var U=this.value.split("\\").pop();$(".value-holder."+Y).text(U)}}function z(){$(this).removeClass("error")}function a(){$("#save").attr("disabled",false).text("Save").removeClass("saving").removeClass("saved")}function K(U){$("#save").attr("disabled",true).addClass("saving");$("#data-form").find(".error-msg").remove();form_function.processForm(U,$(this).attr("action"),s)}function s(U){errorArr=[];form_function.handleXmlReturn(U,errorArr,c)}function c(){var U=false;$.each(errorArr,function(V,W){if(W.type=="error"){U=true;$("#data-form").find("."+W.name).addClass("error").parent().parent().append('<div class="error-msg">'+W.msg+"</div>")}else{if(W.type=="success"){if((W.new_entry=="1")&&(W.redirect)){window.open(W.redirect,"_self")}}}});if(!U){$("#save").attr("disabled",true).text("Saved").removeClass("saving").addClass("saved");$(".updated-on").text("just now")}else{$("#save").attr("disabled",false).removeClass("saving").removeClass("saved")}}function m(){}function C(){}function p(Z,X,U,W){m();Z.preventDefault();var V=$(Z.target);var Y=new FormData($(Z.target)[0]);V.addClass("loading");$.ajax({type:"POST",url:X,data:Y,xhr:function(){var aa=$.ajaxSettings.xhr();if(aa.upload){}return aa},error:function(aa,ac,ab){V.removeClass("loading")},success:function(aa){setTimeout(function(){V.removeClass("loading")},300);var ac=$.parseXML(aa);var ab=$(ac);U(ab,$(Z.target).serializeArray())},cache:false,dataType:"text",contentType:false,processData:false});return false}function J(V,U){$.ajax({type:"POST",url:U+"?id="+sess_id,data:$(V.target).serialize(),dataType:"text",error:function(W,Y,X){writeOutput("Error")},success:function(W){writeOutput("Complete")}});return false}function E(X,W,U,V,Y){if(typeof sess_id=="undefined"){sess_id=""}$.ajax({type:"POST",url:W+"?id="+sess_id,data:X,dataType:"text",error:function(Z,ab,aa){},success:function(Z){var ab=$.parseXML(Z);var aa=$(ab);if(U){U(aa,Y)}if(V){$(V).dialog("close")}}});return false}function e(V,U,X,W){if(V){$(V).find("row").each(function(){var Y=0;var aa="";var ab=$(this);var Z=new Object();var ac=ab.children()[Y].nodeName;while(ac){Z[ac]=ab.find(ac).text();if(ab.children()[Y]){ac=ab.children()[Y].nodeName}else{ac=false}Y++}U.push(Z)})}if(X){if(W){X(W)}else{X()}}}function F(V,U,X,W){if(V){$(V).find("response").each(function(){var Y=0;var aa="";var ab=$(this);var Z=new Object();var ac=ab.children()[Y].nodeName;while(ac){Z[ac]=ab.find(ac).text();if(ab.children()[Y]){ac=ab.children()[Y].nodeName}else{ac=false}Y++}U.push(Z)})}if(X){if(W){X(W)}else{X()}}}function T(U,V){$("#"+U).val(V)}function o(W,U,X){var V=$("#"+W);V.children().remove();$.each(U,function(){if((X==this.value)||(X==this.name)){V.append($('<option selected="selected" />').val(this.value).text(this.name))}else{V.append($("<option />").val(this.value).text(this.name))}})}function A(X,U,W){var V=X;V.children().remove();$.each(U,function(){if((W==this.value)||(W==this.name)){writeOutput(W+" does equal "+this.value);V.append($('<option selected="selected" />').val(this.value).text(this.name))}else{writeOutput(W+" does not equal "+this.value);V.append($("<option />").val(this.value).text(this.name))}})}function w(X,V){var W=$("#"+X);var U=1;$.each(V,function(){W.append($("<option />").val(this.name).text(this.name).attr("data-image","/app/images/fonts/fonts_"+String(U)+".png"));U++})}function f(W,U,X){var V=$("#"+W);V.children().remove();$.each(U,function(){if(X==this.value){V.append($('<option selected="selected" />').val(this.value).text(this.name))}else{V.append($("<option />").val(this.value).text(this.name))}})}function i(X,Y,Z,W,V,U){$("#"+X).html(truncate(Y,Z,W,V));$("#"+X).attr("data",Y);if(U){$("#"+U).val(Y)}}function x(U,V){$("#"+U+" option").filter(function(){return $(this).attr("value")==V||$(this).text()==V}).attr("selected",true);$("#"+U).attr("data",V)}function q(V,U){$(V).find("option").filter(function(){return $(this).attr("value")==U}).attr("selected",true);$("#"+name).attr("data",U)}function k(U,V){if(V=="true"){$("#"+U).prop("checked",true);$.uniform.update("input[name="+U+"][value=true]")}else{$("#"+U).prop("checked",false);$.uniform.update("input[name="+U+"][value=false]")}$("#"+U).attr("data",V)}function v(V,W,U){$("input[name="+V+"][value="+W+"]").prop("checked",true);$.each(U,function(X,Y){$.uniform.update("input[name="+V+"][value="+X+"]")})}function N(U,ab,ac,V,Z,X,ad){var aa=Z>0?truncate(ab,ac,V,Z):ab;var Y=String(aa).split(",");var W="";var ae=[];$("#"+U).superblyTagField({allowNewTags:true,showTagsNumber:10,preset:Y,tags:ae});$("#"+U).attr("data",ab)}function Q(ad,V,ab,aa,X,Y,U,W){var ac;var Z;j=$("#"+V);L=$("#"+ad);h=$("#"+Y);O=U;G=W;switch(aa){case"TextInput":value=$(j).attr("data");$(".fieldTitle").html(ab);$(".fieldItem").html('<input id="textInputField" name="textInputValue" type="text" value="'+value+'" class="white-input"/>');ac=function(){$("#textInputField").focus()};Z=g;$(".form-instructions").html(X);break;case"TextArea":value=$(j).attr("data");$(".fieldTitle").html(ab);$(".fieldItem").html('<textarea id="textInputField" name="textInputValue" class="white-textarea">'+value+"</textarea>");ac=function(){$("#textInputField").focus()};Z=g;$(".form-instructions").html(X);break;case"Tags":value=$(j).attr("data");$(".fieldTitle").html(ab);$(".fieldItem").html('<div id="textTagEdit" name="textTagEdit" class="tagEdit"></div>');N("textTagEdit",value,",...",",",0,0,true);ac=function(){$(".superblyTagInput").focus()};Z=H;$(".form-instructions").html(X);break}$(".form-container").animate({left:"-550px"},600,"easeInExpo",ac);$(L).submit(Z)}function t(ad,ab,ah,U){var aa={confirm:true};var Z=languageAlerts.errors;var V;var X;var ae;var Y;var ag;var af;V=Z.notNullTitle;X=Z.notNullDescriptionPrefix;ae=Z.notNullDescriptionAdditionalInfo;ag=Z.filenameTitle;af=Z.filenameDescription;errorFilenameLengthTitle=Z.filenameLengthTitle;errorFilenameLengthDescription=Z.filenameLengthDescription;errorFolderTitle=Z.folderTitle;errorFolderDescription=Z.folderDescription;errorFolderLengthTitle=Z.folderLengthLongTitle;errorFolderLengthDescription=Z.folderLengthLongDescription;for(var ac=0;ac<U.length;ac++){switch(U[ac]){case"notnull":if(!ad){loadAlert(V,X+" "+G+". "+ae,aa,ah,ad);return}break;case"filename":var W=/^[a-zA-Z0-9_]*$/;Y=String(ad).split(".");ad=Y[0];if(!W.test(ad)){loadAlert(ag,af,aa,ah,ad);return}else{if(ad.length>32){loadAlert(errorFilenameLengthTitle,errorFilenameLengthDescription,aa,ah,ad);return}}ad=ad+".html";break;case"folder":var W=/^[a-zA-Z0-9_ ]*$/;if(!W.test(ad)){loadAlert(errorFolderTitle,errorFolderDescription,aa,ah,ad);return}else{if(ad.length>32){loadAlert(errorFolderLengthTitle,errorFolderLengthDescription,aa,ah,ad);return}}break}}ab(ad)}function g(){var U=$("#textInputField").val();t(U,B,null,O);return false}function H(){var U=$("#textTagEdit").val();t(U,r,null,O);return false}function B(V){var U=V;$(L).unbind("submit");V=truncate(V,"..."," ",35);$(j).html(V);$(j).attr("data",U);$(h).val(U);y();return false}function r(V){var U=V;$(L).unbind("submit");V=truncate(V,"...",",",35);$(j).html(V);$(j).attr("data",U);$(h).val(U);y();return false}function P(){y()}function y(){$(".form-container").animate({left:"0px"},600,"easeInExpo")}function b(U){value=$("#"+U).val()}function n(U){value=$("input[name='"+U+"']:checked").val()}};$(function(){form_function.init()});var global=new function(){this.init=i;function i(){$(document).on("click","#popup-menu",j).click(h);$("#menu").click(d);$("#sideMenu .close, #sideMenu a").click(f);$("#nav .user-links .settings").click(g);$("#user-menu").click(j);$("html,body").click(b);$(".show-registration").click(e);$(window).scroll(function(k){if($(window).scrollTop()>0){$("#nav").addClass("scroll");$("#hero").addClass("scroll")}else{$("#nav").removeClass("scroll");$("#hero").removeClass("scroll")}});$("#themes .content").mouseover(function(){$(this).prev().addClass("over")}).mouseout(function(){$(this).prev().removeClass("over")});a();$(".more-arrow").click(function(){$("html, body").animate({scrollTop:$("#your-idea-starts-here").offset().top},1500,"easeInOutExpo")});$("#user-nav .icon").mouseover(function(){var k=$(this).attr("type");$("#user-nav .flyout."+k).addClass("show")}).mouseout(function(){var k=$(this).attr("type");$("#user-nav .flyout."+k).removeClass("show")});$("#nav .user").mouseover(function(){$(".user-popup").show();setTimeout(function(){$(document).one("mouseover","body",function(){$(".user-popup").hide()})},500)});$(".user-popup").mouseover(function(k){k.stopPropagation()});$("#nav .user").click(function(){window.open("/dashboard","_self")});$("#homeVideo").on("ended",function(){$("#homeVideo").get(0).play()});$(".videoContainer").height($("#hero").height());$(window).resize(function(){$(".videoContainer").height($("#hero").height())});if(navigator.userAgent.match(/(iPad|iPhone|iPod touch)/g)){$("#homeVideo").remove()}$(".accordion").each(function(k,l){$(this).accordion({active:parseInt($(this).attr("data-slide"),10)}).addClass("show")})}function a(){$(".preloader").each(function(k,l){var m=$(this).attr("data-src");$(this).attr("src",m).load(function(){$(this).removeClass("loading").removeClass("preloader");$(this).prev().removeClass("loading")})})}function c(l){var k=$('<div id="popup-menu"><span class="title">'+subscriptionMsg+'</span><a href="/dashboard/subscription">'+subscriptionLink+'</a><a href="/dashboard/account">User Settings</a></div>');$("body").append(k);return false}function j(k){k.stopImmediatePropagation()}function h(k){$("#popup-menu").remove()}function d(k){$("#sideMenu").show();setTimeout(function(){$("body").addClass("menu")},50)}function f(k){$("body").removeClass("menu");setTimeout(function(){$("#sideMenu").hide()},500)}function g(k){$("#user-menu").show();k.stopImmediatePropagation()}function b(k){$("#user-menu").hide()}function e(){window.open("/signup","_self")}};$(function(){global.init()});var homepage=new function(){var f;this.init=d;function d(){var g=$("#hero .preloader-screenshot");var h=parseInt($(window).width(),10);if(h<800){g.remove();c()}else{g.on("load",e).attr("src","/images/cubender_screenshots_full_verylo.jpg")}if(typeof g[0]!="undefined"){if(g[0].complete){g.load()}}$(".tweet-it").click(function(){var k=575,i=400,n=($(window).width()-k)/2,m=($(window).height()-i)/2,j=this.href,l="status=1,width="+k+",height="+i+",top="+m+",left="+n;var o="http://twitter.com/share?text="+$(this).attr("data-tweet");window.open(o,"twitter",l)});$(window).scroll(function(){b()});b()}function c(){$("#hero,.home").addClass("animate");a()}function e(){setTimeout(function(){$("#hero,.home").addClass("animate")},1500);a()}function a(){setTimeout(function(){clearInterval(f);f=setInterval(function(){if($("#hero .screenshot.main").hasClass("two")){$("#hero .screenshot.main").removeClass("two").addClass("three")}else{if($("#hero .screenshot.main").hasClass("three")){$("#hero .screenshot.main").removeClass("three").addClass("four")}else{if($("#hero .screenshot.main").hasClass("four")){$("#hero .screenshot.main").removeClass("four");clearInterval(f);a()}else{$("#hero .screenshot.main").addClass("two")}}}},750)},4000)}function b(){$(".animator").each(function(){var j=$(this);var l=parseInt($(window).scrollTop());var k=parseInt($(window).height());var h=parseInt(j.offset().top);var i=k+l;var g=k/4;if((h<(i-g))&&(h>(i-k))){setTimeout(function(){j.addClass("inview");if(j.attr("id")=="footer"){$("#footer .counter").each(function(){var o=parseInt($(this).attr("data-value"));var n=parseInt($(this).html());var q=0;var p=$(this);var m=setInterval(function(){if(o>n){p.html(n);n+=10;q-=10}else{p.html(o);clearInterval(m)}},q)})}},50)}})}};$(function(){homepage.init()});var import_tool=new function(){var a;var c="/dashboard/post/themes/import/";this.init=f;this.importTemplateByID=h;function f(){$(".import_theme").click(d)}function d(i){a=$(this).attr("theme_id");b();i.preventDefault();return false}function h(i){a=i;b()}function b(){var i="theme_id="+a;$("body").css("cursor","progress");if(a){form_function.processValues(i,c,e)}return false}function e(l){var j=l.find("result").text();var m=l.find("reason").text();var k=l.find("id").text();$("body").css("cursor","auto");if(j=="success"){window.location.href="/app/editor/"+k}else{if(j=="login_required"){$(document).one("signup-complete",b).trigger("show-signup",[true])}else{if(j=="is_child"){var i={confirm:false,verify:false};loadAlert("That's not going to work","This user account is not able to import themes. ",i,false)}else{var i={confirm:false,verify:true};loadAlert("Wait!",m+'<span class="question">Would you like to upgrade now?</span>',i,g)}}}}function g(i){if(i){window.open("/account/upgrade","_self")}else{$(document).trigger("import_done")}}};$(function(){import_tool.init()});var loader=new function(){this.init=c;this.show=a;this.hide=b;function c(){}function a(){$("body").append('<div id="loader" class="animate"><div class="loading"></div><span>Please wait...</span></div>')}function b(){$("#loader").removeClass("animate");setTimeout(function(){$("#loader").remove()},500)}};var modal=new function(){var e=0;this.init=d;function d(){$(document).on("modal",b);$(document).on("click",".underlay",c);$(document).on("click",".modal-popup .close",c);$(document).on("click",".modal-popup a",c)}function b(g,f){e=f;$("#"+e).show();$(".underlay").show();$("#"+e).off("click",a).click(a);setTimeout(function(){$("#"+e).addClass("show");$(".underlay").addClass("show")},50)}function c(f){$("#"+e).removeClass("show");$(".underlay").removeClass("show");setTimeout(function(){$("#"+e).hide();$(".underlay").hide()},500);if($(this).attr("data-link")=="event"){f.preventDefault();return false}}function a(f){}};$(function(){modal.init()});var preview=new function(){this.init=b;function b(){$("#responsive-nav > .button").click(a)}function a(e){var d=$(this).attr("action");var c=$("#preview-frame > iframe");$("#responsive-nav > .button").removeClass("selected");$(this).addClass("selected");switch(d){case"mobile":$("#preview-frame").removeClass("portrait").removeClass("landscape").removeClass("desktop").addClass("mobile");break;case"portrait":$("#preview-frame").removeClass("mobile").removeClass("landscape").removeClass("desktop").addClass("portrait");break;case"landscape":$("#preview-frame").removeClass("mobile").removeClass("portrait").removeClass("desktop").addClass("landscape");break;default:$("#preview-frame").removeClass("portrait").removeClass("landscape").removeClass("mobile").addClass("desktop");break}}};$(function(){preview.init()});var pricing_box=new function(){this.init=d;function d(){$("#packages .payment-frequency-select > div").click(b);$(document).on("setPaymentTerm",c)}function c(f,e){a(e)}function a(e){$("#packages .package").each(function(){var f=$(this).attr("data-amount-m-readable");var g=$(this).attr("data-amount-y-readable");if(e=="Y"){$(this).find(".amount").html(g);$(this).find(".term-type").text("yearly")}else{$(this).find(".amount").html(f);$(this).find(".term-type").text("monthly")}})}function b(f){var e=$(this).attr("term")=="yearly"?"Y":"M";$("#packages .payment-frequency-select > div").removeClass("selected");$(this).addClass("selected");a(e)}};$(function(){pricing_box.init()});var signup=new function(){var b;var e;var i=false;this.init=j;this.send=g;this.result=k;this.init=j;this.start=c;function j(){$(document).on("click",".package,.signup-link",c).on("click",".login-link",a).on("click",".popup-container .popup .close",h).on("click",".popup-container .tabs .tab",f).on("show-signup",c).on("close-signup",h);$(".home.signup").on("submit",g);$(".home.login").on("submit",g)}function f(){$(".popup-container .popup").toggleClass("showLogin")}function h(l){$("#popup-signup").removeClass("show");$(document).off("signup-complete");i=false;setTimeout(function(){$("#popup-signup").hide()},800)}function d(){window.google_conversion_id=1004728738;window.google_conversion_label="BD_oCK2v7l0QouOL3wM";window.google_remarketing_only=false;goog_report_conversion();$(document).trigger("signup-complete");h()}function c(m,l){$(".popup-container .popup").removeClass("showLogin");$("#popup-signup").show();i=l;setTimeout(function(){$("#popup-signup").addClass("show")},50);m.preventDefault();return false}function a(l){$(".popup-container .popup").addClass("showLogin");$("#popup-signup").show();setTimeout(function(){$("#popup-signup").addClass("show")},50);l.preventDefault();return false}function g(l){form_function.processForm(l,$(this).attr("action"),signup.result)}function k(n){var m=n.find("status").text();if(m=="error"){var p=n.find("field").text();var o=n.find("reason").text();var l={confirm:false,verify:false};loadAlert("There was an error",o,l)}else{if(!i){var q=n.find("redirect").text();window.open(q,"_self")}d()}}};$(function(){signup.init()});